@page "/home"

@inject NavigationManager Navigation
@inject Data.IFNFData FNFData
@inject Data.CustomAuthenticationStateProvider CustomAuthenticationStateProvider

<PageTitle>Four Nations Fantasy</PageTitle>

<MudText Typo="Typo.h3" Align="Align.Center" Class="my-4">
    Four Nations Fantasy
</MudText>


@if (Users is not null)
{
    <MudGrid>
        @foreach (var user in Users)
        {
            <MudItem xs="6">
                <TeamPreview User="@user" />
            </MudItem>
        }
    </MudGrid>
}

@code{

    private IEnumerable<Data.User>? Users;
    
    protected override async Task OnInitializedAsync()
    {
        if (string.IsNullOrEmpty(CustomAuthenticationStateProvider.CurrentUser.Email))
        {
            Navigation.NavigateTo("/");
        }
        
        Users = await FNFData.GetAllUsersAsync();
    }

}